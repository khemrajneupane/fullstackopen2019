{"version":3,"sources":["components/PersonForm.js","components/Filter.js","components/Persons.js","services/Persons.js","App.js","index.js"],"names":["Input","_ref","text","inputValue","handler","react_default","a","createElement","value","onChange","Button","_ref2","type","PersonForm","_ref3","onSubmit","nameInputChanged","numberInputChanged","newName","newNumber","PersonForm_Input","PersonForm_Button","Filter","handlePersonsSearch","Persons","persons","foundPerson","typeSearch","deleteList","map","person","key","id","name","number","onClick","baseUrl","services_Persons","axios","get","newObject","post","then","response","data","put","concat","personId","delete","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setTypeSearch","_useState9","_useState10","setFoundPersons","_useState11","_useState12","message","setMessage","_useState13","_useState14","errorMessage","setErrorMessage","setNullMessage","setTimeout","useEffect","personsServices","catch","error","className","components_Filter","event","target","personsSearched","filter","toLowerCase","includes","components_PersonForm","preventDefault","nameStyle","charAt","toUpperCase","slice","length","ifTrue","indexOf","thisPerson","r","window","confirm","console","log","components_Persons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.a4492ab2.chunk.js","sourcesContent":["import React from \"react\";\r\nexport const Input = ({ text, inputValue, handler }) => {\r\n  return (\r\n    <div>\r\n      {text}: <input value={inputValue} onChange={handler} />\r\n    </div>\r\n  );\r\n};\r\nconst Button = ({ type, text }) => {\r\n  return <button type={type}>{text}</button>;\r\n};\r\n\r\nconst PersonForm = ({\r\n  onSubmit,\r\n  nameInputChanged,\r\n  numberInputChanged,\r\n  newName,\r\n  newNumber\r\n}) => {\r\n  return (\r\n    <form onSubmit={onSubmit}>\r\n      <Input text=\"name\" inputValue={newName} handler={nameInputChanged} />\r\n      <Input\r\n        text=\"number\"\r\n        inputValue={newNumber}\r\n        handler={numberInputChanged}\r\n      />\r\n      <Button type=\"submit\" text=\"add\" />\r\n    </form>\r\n  );\r\n};\r\nexport default PersonForm;\r\n","import React from \"react\";\r\nimport { Input } from \"./PersonForm\";\r\n\r\nconst Filter = ({ value, handlePersonsSearch }) => {\r\n  return (\r\n    <Input\r\n      text=\"filter shown with\"\r\n      inputValue={value}\r\n      handler={handlePersonsSearch}\r\n    />\r\n  );\r\n};\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ persons, foundPerson, typeSearch, deleteList }) => {\r\n  const rows = () =>\r\n    typeSearch === \"\"\r\n      ? persons.map(person => (\r\n          <li key={person.id}>\r\n            {person.name} {person.number}\r\n            <button onClick={() => deleteList(person)}>delete</button>\r\n          </li>\r\n        ))\r\n      : foundPerson.map(persons => (\r\n          <li>\r\n            {persons.name} {persons.number}\r\n          </li>\r\n        ));\r\n  return <ul>{rows()}</ul>;\r\n};\r\nexport default Persons;\r\n","import axios from \"axios\";\r\n\r\n//const baseUrl = \"http://localhost:3001/api/persons\";\r\n/**After build version added to the backend file, the url can be as follow */\r\nconst baseUrl = \"/api/persons\";\r\n\r\n//const baseUrl = \"https://fullstack2019back.herokuapp.com/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request;\r\n};\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then(response => response.data);\r\n};\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst deleteList = personId => {\r\n  const request = axios.delete(`${baseUrl}/${personId}`);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nexport default { getAll, create, update, deleteList };\r\n","import React, { useState, useEffect } from \"react\";\nimport PersonForm from \"./components/PersonForm\";\nimport Filter from \"./components/Filter\";\nimport Persons from \"./components/Persons\";\nimport personsServices from \"./services/Persons\";\nimport \"./index.css\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(0);\n  const [typeSearch, setTypeSearch] = useState(\"\");\n  const [foundPerson, setFoundPersons] = useState([]);\n  const [message, setMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  const setNullMessage = () => {\n    setTimeout(() => {\n      setMessage(null);\n      setErrorMessage(null);\n    }, 3000);\n  };\n  const Notification = ({ message, errorMessage }) => {\n    if (message === null || errorMessage != null) {\n      return <div className=\"errorMessage\">{errorMessage}</div>;\n    } else if (message != null || errorMessage === null) {\n      return <div className=\"message\">{message}</div>;\n    }\n  };\n\n  useEffect(() => {\n    personsServices\n      .getAll()\n      .then(response => {\n        setPersons(response.data);\n      })\n      .catch(error => {\n        setErrorMessage(`Data retrieval error ${error}`);\n        setNullMessage();\n      });\n  }, []);\n\n  const addName = event => {\n    event.preventDefault();\n    const newObject = {\n      name: newName,\n      number: newNumber,\n      id: null\n    };\n\n    const nameStyle = `${newObject.name\n      .charAt(0)\n      .toUpperCase()}${newObject.name.slice(1, newObject.name.length)}`;\n\n    const check = persons.map(a => a.name.indexOf(newObject.name));\n    const ifTrue = check.indexOf(0) > -1;\n\n    if (newObject.name !== \"\" && newObject.number !== \"\") {\n      if (ifTrue && newObject.number !== \"\") {\n        const thisPerson = persons.filter(\n          person => person.name === newObject.name\n        )[0];\n\n        newObject.id = thisPerson.id;\n        let r = window.confirm(\n          `${\n            thisPerson.name\n          } is already added to phonebook, replace the old number with a new one?`\n        );\n\n        if (r === true) {\n          personsServices\n            .update(thisPerson.id, newObject)\n            .catch(error => console.log(error));\n\n          const value = persons.filter(person => person.id !== thisPerson.id);\n          setPersons(value.concat(newObject));\n\n          setMessage(`Updated ${nameStyle}'s phone number successfully`);\n          setNullMessage();\n        } else if (r === false) {\n          setMessage(`${nameStyle}'s phone number has not been changed`);\n          setNullMessage();\n\n          return;\n        }\n      } else if (ifTrue && newObject.number === \"\") {\n        setPersons(persons);\n\n        setMessage(`${nameStyle}'s phone number has not been supplied`);\n        setNullMessage();\n      } else if (ifTrue === false && newObject.number !== \"\") {\n        personsServices\n          .create(newObject)\n          .then(response => {\n            personsServices\n              .getAll()\n              .then(response => {\n                setPersons(response.data);\n              })\n              .catch(error => console.log(error));\n\n            setMessage(`Added ${nameStyle}`);\n            setNullMessage();\n          })\n          .catch(error => {\n            setErrorMessage(error.response.data);\n            setNullMessage();\n          });\n      } else if (ifTrue === false && newObject.number === \"\") {\n        setPersons(persons);\n\n        setMessage(`${nameStyle}'s phone number is missing`);\n        setNullMessage();\n      }\n    } else {\n      setMessage(\"Name and Number fields are required!\");\n      setNullMessage();\n    }\n  };\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n  const handlePersonsSearch = event => {\n    setTypeSearch(event.target.value);\n    const personsSearched = persons.filter(person =>\n      person.name.toLowerCase().includes(event.target.value.toLowerCase())\n    );\n    setFoundPersons(personsSearched);\n  };\n\n  const deleteList = person => {\n    const { id, name } = person;\n\n    let r = window.confirm(`delete ${name} ?`);\n    if (r === true) {\n      personsServices.deleteList(id).catch(error => {\n        setErrorMessage(\n          `Information of ${name} has been removed from the server.`\n        );\n        setNullMessage();\n      });\n      setPersons(persons.filter(person => person.id !== id));\n      setMessage(`${name}'s entry has been erased`);\n      setNullMessage();\n    } else if (r === false) {\n      setMessage(`${name}'s entry has not been erased`);\n      setNullMessage();\n      return;\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {message != null || errorMessage != null ? (\n        <Notification message={message} errorMessage={errorMessage} />\n      ) : null}\n\n      <Filter handlePersonsSearch={handlePersonsSearch} />\n      <h2>add a new</h2>\n      <PersonForm\n        onSubmit={addName}\n        nameInputChanged={handleNameChange}\n        numberInputChanged={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        persons={persons}\n        foundPerson={foundPerson}\n        typeSearch={typeSearch}\n        deleteList={deleteList}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}