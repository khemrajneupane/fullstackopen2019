(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),c=t.n(u),o=t(2),l=function(e){var n=e.text,t=e.inputValue,a=e.handler;return r.a.createElement("div",null,n,": ",r.a.createElement("input",{value:t,onChange:a}))},i=function(e){var n=e.type,t=e.text;return r.a.createElement("button",{type:n},t)},s=function(e){var n=e.onSubmit,t=e.nameInputChanged,a=e.numberInputChanged,u=e.newName,c=e.newNumber;return r.a.createElement("form",{onSubmit:n},r.a.createElement(l,{text:"name",inputValue:u,handler:t}),r.a.createElement(l,{text:"number",inputValue:c,handler:a}),r.a.createElement(i,{type:"submit",text:"add"}))},m=function(e){var n=e.value,t=e.handlePersonsSearch;return r.a.createElement(l,{text:"filter shown with",inputValue:n,handler:t})},d=function(e){var n=e.persons,t=e.foundPerson,a=e.typeSearch,u=e.deleteList;return r.a.createElement("ul",null,""===a?n.map(function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.number,r.a.createElement("button",{onClick:function(){return u(e)}},"delete"))}):t.map(function(e){return r.a.createElement("li",null,e.name," ",e.number)}))},f=t(3),b=t.n(f),h="/api/persons",p=function(){return b.a.get(h)},v=function(e){return b.a.post(h,e).then(function(e){return e.data})},E=function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then(function(e){return e.data})},g=function(e){return b.a.delete("".concat(h,"/").concat(e)).then(function(e){return e.data})},w=(t(37),function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),l=Object(o.a)(c,2),i=l[0],f=l[1],b=Object(a.useState)(0),h=Object(o.a)(b,2),w=h[0],O=h[1],j=Object(a.useState)(""),S=Object(o.a)(j,2),y=S[0],x=S[1],C=Object(a.useState)([]),N=Object(o.a)(C,2),k=N[0],I=N[1],P=Object(a.useState)(null),L=Object(o.a)(P,2),V=L[0],M=L[1],A=Object(a.useState)(null),D=Object(o.a)(A,2),J=D[0],U=D[1],q=function(){setTimeout(function(){M(null),U(null)},3e3)};Object(a.useEffect)(function(){p().then(function(e){u(e.data)}).catch(function(e){U("Data retrieval error ".concat(e)),q()})},[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),null!=V||null!=J?r.a.createElement(function(e){var n=e.message,t=e.errorMessage;return null===n||null!=t?r.a.createElement("div",{className:"errorMessage"},t):null!=n||null===t?r.a.createElement("div",{className:"message"},n):void 0},{message:V,errorMessage:J}):null,r.a.createElement(m,{handlePersonsSearch:function(e){x(e.target.value);var n=t.filter(function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())});I(n)}}),r.a.createElement("h2",null,"add a new"),r.a.createElement(s,{onSubmit:function(e){e.preventDefault();var n={name:i,number:w,id:null},a="".concat(n.name.charAt(0).toUpperCase()).concat(n.name.slice(1,n.name.length)),r=t.map(function(e){return e.name.indexOf(n.name)}).indexOf(0)>-1;if(""!==n.name&&""!==n.number)if(r&&""!==n.number){var c=t.filter(function(e){return e.name===n.name})[0];n.id=c.id;var o=window.confirm("".concat(c.name," is already added to phonebook, replace the old number with a new one?"));if(!0===o){E(c.id,n).catch(function(e){return console.log(e)});var l=t.filter(function(e){return e.id!==c.id});u(l.concat(n)),M("Updated ".concat(a,"'s phone number successfully")),q()}else if(!1===o)return M("".concat(a,"'s phone number has not been changed")),void q()}else r&&""===n.number?(u(t),M("".concat(a,"'s phone number has not been supplied")),q()):!1===r&&""!==n.number?v(n).then(function(e){p().then(function(e){u(e.data)}).catch(function(e){return console.log(e)}),M("Added ".concat(a)),q()}).catch(function(e){U(e.response.data),q()}):!1===r&&""===n.number&&(u(t),M("".concat(a,"'s phone number is missing")),q());else M("Name and Number fields are required!"),q()},nameInputChanged:function(e){f(e.target.value)},numberInputChanged:function(e){O(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(d,{persons:t,foundPerson:k,typeSearch:y,deleteList:function(e){var n=e.id,a=e.name,r=window.confirm("delete ".concat(a," ?"));if(!0===r)g(n).catch(function(e){U("Information of ".concat(a," has been removed from the server.")),q()}),u(t.filter(function(e){return e.id!==n})),M("".concat(a,"'s entry has been erased")),q();else if(!1===r)return M("".concat(a,"'s entry has not been erased")),void q()}}))});c.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.a4492ab2.chunk.js.map